# Dynamic Vocabulary Implementation Roadmap

## 구현 로드맵

### 🎯 Phase 1: 기초 구현 (1주차)

#### 1-1. Firestore 스키마 업데이트
```javascript
// words 컬렉션에 새 필드 추가
{
  // 기존 필드들...
  source: {
    type: 'veterans_pdf',  // 기본값
    origin: 'vzip_3k.pdf',
    addedAt: new Date()
  }
}
```

#### 1-2. 새 컬렉션 생성
- `word_relationships` - 단어 간 관계
- `definition_variants` - 다중 정의

#### 1-3. 기본 API 구현
- `/api/vocabulary/discover` - 단어 발견
- `/api/vocabulary/save-dynamic` - 동적 단어 저장

#### 1-4. 사용자 단어장 자동 생성
```typescript
// 사용자 로그인 시 체크
if (!userDiscoveredCollection) {
  await createUserCollection({
    name: "내가 발견한 단어",
    type: "discovered"
  })
}
```

### 🚀 Phase 2: UI 통합 (2주차)

#### 2-1. WordDetailModal 수정
- 유사어 클릭 이벤트 추가
- 발견 모달 트리거 로직

#### 2-2. DiscoveryModal 구현
```typescript
interface DiscoveryModal {
  // 새 단어 발견 UI
  - AI 정의 표시
  - 신뢰도 지표
  - 저장/건너뛰기 옵션
}
```

#### 2-3. 다중 정의 표시
- 출처별 정의 표시
- 우선순위 기반 정렬
- 사용자 선택 UI

### 🔗 Phase 3: 관계 시스템 (3주차)

#### 3-1. 관계 생성 자동화
- 유사어 클릭 → 자동 관계 생성
- 양방향 관계 처리

#### 3-2. 관계 시각화
```typescript
// 간단한 관계 표시
word → synonyms: [word1, word2, ...]
     → antonyms: [word3, word4, ...]
```

#### 3-3. 관계 기반 추천
- "이 단어와 함께 학습하기 좋은 단어"
- 관계 강도 기반 정렬

### ⚙️ Phase 4: 최적화 (4주차)

#### 4-1. 성능 최적화
- 캐싱 레이어 구현
- 배치 작업 지원
- 인덱스 최적화

#### 4-2. 사용자 경험 개선
- 로딩 상태 개선
- 오프라인 지원
- 에러 핸들링

#### 4-3. 분석 및 모니터링
- 사용 패턴 추적
- 인기 발견 단어
- 성능 메트릭

## 구현 우선순위

### 🔴 필수 (MVP)
1. words 컬렉션 source 필드 추가
2. 단어 발견 API
3. 유사어 클릭 → 발견 플로우
4. 개인 단어장에 저장

### 🟡 중요
1. word_relationships 컬렉션
2. 다중 정의 지원
3. 관계 시각화
4. 캐싱

### 🟢 선택
1. 커뮤니티 기능
2. 고급 분석
3. 일괄 처리
4. 내보내기/가져오기

## 리스크 및 대응 방안

### 1. 데이터 품질
**리스크**: AI 생성 정의가 부정확할 수 있음
**대응**: 
- 신뢰도 점수 표시
- 사용자 피드백 수집
- 수동 검증 옵션

### 2. 성능
**리스크**: 동적 단어가 많아지면 쿼리 느려짐
**대응**:
- 적극적인 캐싱
- 페이지네이션
- 인덱스 최적화

### 3. 비용
**리스크**: AI API 호출 비용 증가
**대응**:
- 사용자별 일일 제한
- 캐싱으로 중복 호출 방지
- 효율적인 프롬프트

## 성공 지표

### 단기 (1개월)
- 일일 단어 발견 수: 100+
- 저장률: 30%+
- 오류율: <5%

### 중기 (3개월)
- 사용자당 평균 동적 단어: 50+
- 관계 네트워크 밀도: 2.5+
- 재방문율: 60%+

### 장기 (6개월)
- 커뮤니티 검증 단어: 500+
- 정의 정확도: 90%+
- 사용자 만족도: 4.5/5+

## 개발 체크리스트

### Week 1
- [ ] Firestore 스키마 업데이트
- [ ] 새 컬렉션 생성
- [ ] 발견 API 구현
- [ ] 저장 API 구현

### Week 2
- [ ] WordDetailModal 수정
- [ ] DiscoveryModal 구현
- [ ] 다중 정의 UI
- [ ] 통합 테스트

### Week 3
- [ ] 관계 자동 생성
- [ ] 관계 쿼리 최적화
- [ ] 간단한 시각화
- [ ] 추천 시스템

### Week 4
- [ ] 캐싱 구현
- [ ] 성능 테스트
- [ ] 에러 핸들링
- [ ] 배포 준비